# PRD (Product Requirements Document)

## 프로젝트명: ChaebolMap — 한국 대기업 그룹 소유지분도 시각화 플랫폼

### 1. 개요

ChaebolMap은 한국 주요 대기업 그룹(재벌)의 **소유지분 구조를 인터랙티브하게 시각화**하는 웹 애플리케이션입니다.
공정거래위원회가 발표하는 대기업집단 소유지분도 데이터를 기반으로, 복잡한 순환출자·교차출자 구조를 직관적인 그래프로 표현합니다.

### 2. 문제 정의

- 대기업 그룹의 소유 구조는 수십~수백 개 계열사 간 복잡한 지분 관계로 이루어져 있음
- 기존 PDF/이미지 형태의 소유지분도는 정적이고, 특정 회사나 경로를 추적하기 어려움
- 상장/비상장 여부, 지분율, 순환출자 경로 등을 한눈에 파악하기 힘듦

### 3. 솔루션

인터랙티브 네트워크 그래프를 통해:
- 노드(회사)를 클릭하면 상세 정보 표시
- 엣지(지분 관계)에 지분율(%) 표시
- 줌/패닝/필터링으로 복잡한 구조 탐색
- 상장회사(★)와 비상장회사를 시각적으로 구분
- 동일인(총수)으로부터의 지배구조 경로 추적

### 4. 기술 스택

| 영역 | 기술 |
|------|------|
| Frontend | Next.js 14 (App Router), React 18, TypeScript |
| UI Components | shadcn/ui, Radix UI, Tailwind CSS |
| Graph Visualization | React Flow (@xyflow/react) |
| Backend / API | Next.js Route Handlers (API Routes) |
| Database | Supabase (PostgreSQL) |
| Auth | Supabase Auth (이메일/비밀번호, OAuth) |
| Deployment | Vercel |
| Charts | Recharts (보조 차트/통계) |
| State Management | Zustand |

### 5. 타겟 사용자

- **개인 투자자**: 그룹 구조 파악 후 투자 판단에 활용
- **금융 애널리스트**: 기업 분석 시 소유 구조 참고
- **기자/연구원**: 대기업 지배구조 기사/논문 작성 시 활용
- **일반 대중**: 한국 경제의 재벌 구조에 관심 있는 사람들

### 6. 지원 그룹 (MVP)

공정위 대기업집단 소유지분도 기반 29대 그룹 지원:

| 그룹 | 동일인(총수) | 특징 |
|------|-----------|------|
| 삼성 | 이재용 | 전자/바이오/금융, 복잡한 순환출자 |
| SK(에스케이) | 최태원 | 에너지/ICT 계열 광범위 |
| 현대자동차 | 정의선 | 자동차/건설/금융 다각화 |
| LG(엘지) | 구광모 | 화학/전자/생활건강/에너지 |
| 롯데 | 신동빈 | 유통/화학/식품/건설 |
| 포스코 | 포스코홀딩스(주) | 철강/소재/에너지 |
| 한화 | 김승연 | 방산/에너지/금융/우주 |
| HD현대 | 정몽준 | 조선/해양/중공업 |
| GS | 허창수 | 에너지/유통/건설 |
| 신세계 | 이명희 | 유통/면세/호텔 |
| 한진 | 조원태 | 항공/물류/터미널 |
| KT | KT(자기주식) | 통신/미디어/부동산 |
| CJ | 이재현 | 식품/엔터/물류/바이오 |
| LS | 구자은 | 전선/에너지/전력기기 |
| 카카오 | 김범수 | IT플랫폼/엔터/금융 |
| 두산 | 박정원 | 인프라/에너지/로보틱스 |
| DL | 이준용 | 건설/화학/에너지 |
| 중흥건설 | 정창선 | 건설/토건 |
| 셀트리온 | 서정진 | 바이오시밀러/제약 |
| 네이버 | 최수연 | IT플랫폼/웹툰/커머스 |
| 미래에셋 | 박현주 | 증권/자산운용/생명보험 |
| 쿠팡 | 김범석 | 이커머스/물류/배달 |
| 한국앤컴퍼니 | 조현범 | 타이어/부품 |
| 부영 | 이중근 | 건설/주택 |
| 영풍 | 장형진 | 비철금속/아연 |
| 하림 | 김홍국 | 식품/해운/농업 |
| 효성 | 조현준 | 섬유/중공업/화학/첨단소재 |
| SM(삼라마이다스) | 우오현 | 해운/철강/건설 |
| HDC | 정몽규 | 건설/개발/호텔 |

### 7. 핵심 기능

#### 7.1 인터랙티브 소유지분도 (메인 기능)
- **네트워크 그래프 시각화**
  - 각 회사를 노드로 표현
  - 지분 관계를 방향성 엣지(화살표)로 표현
  - 엣지 라벨에 지분율(%) 표시
  - 상장회사(★) 노드 시각적 구분 (색상, 아이콘)
  - 비상장회사 노드 구분
  - 동일인(총수) 노드 별도 스타일링
- **인터랙션**
  - 줌 인/아웃 (마우스 휠, 버튼)
  - 패닝 (드래그)
  - 노드 클릭 → 회사 상세 정보 패널
  - 노드 호버 → 연결된 지분 관계 하이라이트
  - 특정 회사 간 지분 경로 추적
  - 미니맵 표시
- **필터링**
  - 상장사만 보기
  - 지분율 임계값 필터 (예: 20% 이상만 표시)
  - 특정 회사 검색 및 포커스
  - 계열사 유형별 필터 (금융, IT, 제조 등)

#### 7.2 회사 상세 정보 패널
- 회사명, 상장 여부
- 주요 주주 및 지분율 목록
- 투자(출자)하고 있는 회사 목록
- 업종/분류
- (상장사인 경우) 시가총액, 주가 정보

#### 7.3 그룹 비교 뷰
- 그룹별 총 계열사 수, 상장사 수 비교
- 자산 규모 비교 차트
- 소유 구조 복잡도 비교

#### 7.4 대시보드/홈
- 지원 그룹 목록 카드
- 각 그룹 요약 통계 (계열사 수, 상장사 수, 동일인 지분 등)
- 최근 업데이트 일자
- 검색 (그룹명, 회사명)

#### 7.5 인증 & 사용자 기능
- 이메일/비밀번호 회원가입 및 로그인
- OAuth 로그인 (Google)
- 관심 회사/그룹 북마크
- 커스텀 메모 기능

### 8. 페이지 구조 (사이트맵)

```
/                           → 랜딩 페이지 (소개 + 그룹 목록)
/login                      → 로그인
/signup                     → 회원가입
/dashboard                  → 대시보드 (그룹 목록 + 요약 통계)
/groups                     → 전체 그룹 목록
/groups/[slug]              → 그룹 소유지분도 (인터랙티브 그래프)
/groups/[slug]/companies    → 그룹 계열사 목록 (테이블)
/companies/[id]             → 회사 상세 정보
/compare                    → 그룹 비교
/search                     → 통합 검색
/settings                   → 설정
/settings/profile           → 프로필 설정
/settings/bookmarks         → 북마크 관리
```

### 9. 데이터 모델 (주요 테이블)

```
conglomerate_groups (대기업 그룹)
├── id (UUID, PK)
├── name (그룹명: 삼성, SK, 현대자동차, LG, 롯데)
├── slug (URL용: samsung, sk, hyundai, lg, lotte)
├── controller_name (동일인: 이재용, 최태원 등)
├── description (그룹 설명)
├── logo_url
├── data_date (데이터 기준일: 2025.5.1)
├── created_at
└── updated_at

companies (계열사)
├── id (UUID, PK)
├── group_id (FK → conglomerate_groups)
├── name (회사명)
├── is_listed (상장 여부: boolean, ★)
├── is_holding (지주회사 여부)
├── is_controller (동일인 노드 여부)
├── category (업종: 전자, 금융, 건설, 에너지 등)
├── market_cap (시가총액, nullable)
├── stock_code (종목코드, nullable)
├── description
├── created_at
└── updated_at

ownership_relations (지분 관계)
├── id (UUID, PK)
├── group_id (FK → conglomerate_groups)
├── from_company_id (FK → companies, 출자자)
├── to_company_id (FK → companies, 피출자자)
├── ownership_pct (지분율 %, numeric)
├── relation_type (직접출자/간접출자)
├── data_date
├── created_at
└── updated_at

controller_holdings (동일인 직접 보유 현황)
├── id (UUID, PK)
├── group_id (FK → conglomerate_groups)
├── company_id (FK → companies)
├── ownership_pct (지분율 %)
├── data_date
├── created_at
└── updated_at

user_bookmarks (사용자 북마크)
├── id (UUID, PK)
├── user_id (FK → auth.users)
├── company_id (FK → companies, nullable)
├── group_id (FK → conglomerate_groups, nullable)
├── created_at
└── updated_at
```

### 10. 시각화 설계 (노드/엣지 스타일)

#### 노드 타입
| 타입 | 모양 | 색상 | 설명 |
|------|------|------|------|
| 동일인(총수) | 둥근 사각형 (크게) | 골드/노란색 | 그룹 총수 |
| 상장회사(★) | 사각형 + ★ 아이콘 | 파란색 계열 | 거래소 상장 회사 |
| 비상장 지주사 | 마름모 | 초록색 계열 | 지주회사 역할 |
| 비상장 일반 | 사각형 | 회색 계열 | 일반 비상장 계열사 |
| 해외 계열사 | 사각형 (점선 테두리) | 보라색 계열 | 해외법인 |

#### 엣지 스타일
| 지분율 | 선 굵기 | 색상 |
|--------|---------|------|
| 50% 이상 | 굵음 (3px) | 진한 색 |
| 20~50% | 중간 (2px) | 중간 색 |
| 20% 미만 | 얇음 (1px) | 연한 색 |

### 11. 비기능 요구사항

- **성능**: 수백 개 노드/엣지를 부드럽게 렌더링 (60fps)
- **반응형**: 데스크탑 최적화, 태블릿 지원 (모바일은 제한적)
- **접근성**: WCAG 2.1 AA 기준
- **보안**: HTTPS, Supabase RLS 적용
- **SEO**: 랜딩 페이지 SSR, 그룹별 메타 태그

### 12. 마일스톤

| Phase | 범위 | 설명 |
|-------|------|------|
| MVP (Phase 1) | 5대 그룹 지분도, 기본 인터랙션, 랜딩/대시보드 | 핵심 시각화 |
| Phase 2 | 인증, 북마크, 회사 상세, 검색, 필터 고도화 | 사용자 기능 |
| Phase 3 | 그룹 비교, 히스토리(연도별 변화), API 공개 | 고급 기능 |

### 13. 데이터 출처

- 공정거래위원회 대기업집단 소유지분도 (2025.5.1 기준)
- 발행주식총수 기준 지분율(%)
- ★ = 상장회사
