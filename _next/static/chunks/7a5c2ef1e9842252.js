(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87486,25913,e=>{"use strict";var t=e.i(43476),r=e.i(7670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.clsx,s=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;let s=a(t)||a(n);return l[e][s]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,o,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,s],25913);var l=e.i(75157);let i=s("inline-flex items-center rounded-lg px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"bg-primary/15 text-primary",listed:"bg-blue-500/15 text-blue-400",unlisted:"bg-gray-500/15 text-gray-400",up:"bg-red-500/15 text-red-400",down:"bg-blue-500/15 text-blue-400",flat:"bg-gray-500/15 text-gray-400",sector:"bg-violet-500/15 text-violet-400",outline:"border border-border text-muted-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...a}){return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:r}),e),...a})}e.s(["Badge",()=>o],87486)},25652,35408,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>r],25652);let a=(0,t.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>a],35408)},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let a=e.r(32061);function n({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let a=e.r(43476),n=e.r(74080),s=e.r(63599),l=e.r(9885),i=e.r(43369);function o({moduleIds:e}){if("u">typeof window)return null;let t=s.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;r.push(...e)}}if(0===r.length)return null;let o=(0,i.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,l.encodeURIPath)(e)}${o}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,n.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let a=e.r(43476),n=e.r(71645),s=e.r(67585),l=e.r(52157);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,n.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?n.Suspense:n.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(l.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...o?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n}});let a=e.r(55682)._(e.r(69093));function n(e,t){let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:n.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18627,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),n=e.i(70703),s=e.i(75254);let l=(0,s.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var i=e.i(7486),o=e.i(70273),d=e.i(25652),c=e.i(35408);let u=(0,s.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),m=(0,s.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),f=(0,s.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var x=e.i(25913),p=e.i(75157);let h=(0,x.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 active:scale-[0.97]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-muted text-foreground hover:bg-muted/80",outline:"border border-border bg-transparent hover:bg-muted",ghost:"hover:bg-muted",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-11 px-5 py-2",sm:"h-9 px-4 text-xs",lg:"h-12 px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef(({className:e,variant:r,size:a,...n},s)=>(0,t.jsx)("button",{className:(0,p.cn)(h({variant:r,size:a,className:e})),ref:s,...n}));g.displayName="Button";var b=e.i(87486),y=e.i(85149);let j="chaebol-stock-prices",v=[e=>`https://api.allorigins.win/raw?url=${encodeURIComponent(e)}`,e=>`https://corsproxy.io/?${encodeURIComponent(e)}`];async function k(e){try{let t=await fetch(e,{signal:AbortSignal.timeout(5e3)});if(t.ok)return t}catch{}for(let t of v)try{let r=await fetch(t(e),{signal:AbortSignal.timeout(8e3)});if(r.ok)return r}catch{continue}return null}async function N(e){for(let t of[".KS",".KQ"]){let r=e+t;try{let e=`https://query1.finance.yahoo.com/v8/finance/chart/${r}?interval=1d&range=1d`,t=await k(e);if(!t)continue;let a=await t.json(),n=a?.chart?.result?.[0];if(!n)continue;let s=n.meta,l=s.regularMarketPrice,i=s.chartPreviousClose??s.previousClose,o=l-i,d=i>0?o/i*100:0,c=Math.round(l*(s.sharesOutstanding??0)/1e8);return{price:Math.round(l),change:Math.round(o),changePercent:Math.round(100*d)/100,marketCap:c>0?c:0}}catch{continue}}return null}async function w(e){let t={};for(let r=0;r<e.length;r+=5){let a=e.slice(r,r+5).map(async e=>{let r=await N(e);r&&(t[e]=r)});await Promise.all(a)}return t}let C=(0,n.default)(()=>e.A(89010).then(e=>e.OwnershipGraph),{loadableGenerated:{modules:[70743]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"지분도 로딩 중..."})});function P({data:e}){let[n,s]=(0,r.useState)("graph"),{group:x}=e,{companies:h,loading:v,lastUpdate:k,isLive:N}=function(e){let[t,a]=(0,r.useState)({}),[n,s]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),o=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(o.current)return;let t=e.filter(e=>e.isListed&&e.stockCode).map(e=>e.stockCode);async function r(){let e=function(){try{let e=sessionStorage.getItem(j);if(!e)return null;return JSON.parse(e)}catch{return null}}(),r=Date.now();if(e&&r-e.timestamp<3e5)return{data:e.data,timestamp:e.timestamp};s(!0);let a=await w(t);if(s(!1),Object.keys(a).length>0){try{sessionStorage.setItem(j,JSON.stringify({data:a,timestamp:Date.now()}))}catch{}return{data:a,timestamp:Date.now()}}return null}0!==t.length&&(o.current=!0,r().then(e=>{e&&(a(e.data),i(new Date(e.timestamp)))}))},[e]),{companies:Object.keys(t).length>0?e.map(e=>{if(!e.stockCode||!t[e.stockCode])return e;let r=t[e.stockCode];return{...e,stockPrice:r.price,priceChange:r.change,priceChangePercent:r.changePercent,marketCap:r.marketCap>0?r.marketCap:e.marketCap}}):e,loading:n,lastUpdate:l,isLive:Object.keys(t).length>0}}(e.companies),P={...e,companies:h},M=h.filter(e=>e.isListed&&!e.isController).sort((e,t)=>(t.marketCap??0)-(e.marketCap??0)),O=M.reduce((e,t)=>e+(t.marketCap??0),0);return(0,t.jsxs)("div",{className:"h-[calc(100vh-56px)] flex flex-col",children:[(0,t.jsx)("div",{className:"border-b border-border/50 bg-card/50 backdrop-blur-sm px-6 py-4",children:(0,t.jsxs)("div",{className:"max-w-screen-2xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(a.default,{href:"/groups",children:(0,t.jsx)(g,{variant:"ghost",size:"icon",className:"rounded-xl",children:(0,t.jsx)(l,{className:"w-4 h-4"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:(0,y.getGroupIcon)(x.slug)}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-xl font-bold",children:[x.name,"그룹 소유지분도"]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:["동일인: ",x.controllerName," · ",x.dataDate," 기준",v&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-amber-400 animate-pulse",children:[(0,t.jsx)(m,{className:"w-3 h-3"}),"주가 로딩중..."]}),!v&&N&&k&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-green-400",children:[(0,t.jsx)(m,{className:"w-3 h-3"}),"실시간 (",k.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),")"]}),!v&&!N&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[(0,t.jsx)(f,{className:"w-3 h-3"}),"저장된 데이터"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-4 mr-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,t.jsx)(i.Building2,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"계열사"}),(0,t.jsx)("span",{className:"font-bold",children:x.totalCompanies})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,t.jsx)(o.Star,{className:"w-4 h-4 text-amber-400"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"상장"}),(0,t.jsx)("span",{className:"font-bold",children:x.listedCompanies})]}),O>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm",children:[(0,t.jsx)(d.TrendingUp,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"시총"}),(0,t.jsx)("span",{className:"font-bold",children:(0,p.formatNumber)(O)})]})]}),(0,t.jsxs)("div",{className:"flex items-center bg-muted rounded-xl p-1",children:[(0,t.jsx)("button",{onClick:()=>s("graph"),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${"graph"===n?"bg-card text-foreground shadow-sm":"text-muted-foreground"}`,children:"지분도"}),(0,t.jsxs)("button",{onClick:()=>s("list"),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${"list"===n?"bg-card text-foreground shadow-sm":"text-muted-foreground"}`,children:[(0,t.jsx)(u,{className:"w-3.5 h-3.5 inline mr-1"}),"목록"]})]})]})]})}),"graph"===n?(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(C,{data:P})}):(0,t.jsx)("div",{className:"flex-1 overflow-auto px-6 py-6",children:(0,t.jsxs)("div",{className:"max-w-screen-xl mx-auto",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["상장 계열사 (",M.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:M.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-card border border-border/50 hover:border-primary/20 transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Star,{className:"w-4 h-4 text-amber-400 fill-amber-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(b.Badge,{variant:"sector",children:e.category}),e.stockCode&&(0,t.jsx)(b.Badge,{variant:"outline",children:e.stockCode}),e.sector&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.sector})]})]})]}),(0,t.jsx)("div",{className:"text-right",children:e.stockPrice&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-bold",children:(0,p.formatPrice)(e.stockPrice)}),(0,t.jsxs)("div",{className:`flex items-center justify-end gap-1 text-sm ${(e.priceChangePercent??0)>0?"text-red-400":(e.priceChangePercent??0)<0?"text-blue-400":"text-gray-400"}`,children:[(e.priceChangePercent??0)>0?(0,t.jsx)(d.TrendingUp,{className:"w-3.5 h-3.5"}):(e.priceChangePercent??0)<0?(0,t.jsx)(c.TrendingDown,{className:"w-3.5 h-3.5"}):null,(0,t.jsxs)("span",{className:"font-semibold",children:[(e.priceChangePercent??0)>0?"+":"",(e.priceChangePercent??0).toFixed(2),"%"]})]}),e.marketCap&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:["시총 ",(0,p.formatNumber)(e.marketCap)]})]})})]},e.id))})]})})]})}e.s(["GroupDetailClient",()=>P],18627)},89010,e=>{e.v(t=>Promise.all(["static/chunks/211059ea9b4cc79a.js","static/chunks/8a5bd6fe3abc8091.css"].map(t=>e.l(t))).then(()=>t(70743)))}]);